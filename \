using Godot;
using System;

public partial class CannonBall : Area2D
{
    public override void _Ready()
    {
        BodyShapeEntered += OnBodyShapeEntered;

        GetTree().CreateTimer(5).Timeout += QueueFree;
    }

    private void OnBodyShapeEntered(Rid bodyRid, Node2D body, int bodyShapeIndex, int localShapeIndex)
    {
        GD.Print($"Hit body: {body.Name}");
        GD.Print($"Body shape index: {bodyShapeIndex}");
        GD.Print($"Local shape index: {localShapeIndex}");

        // If you want to get the CollisionShape2D node from the shape index:
        // Use PhysicsServer2D to query the shape owner or shape itself if needed.

        QueueFree();
    }
}
